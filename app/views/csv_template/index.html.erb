<% @page_title = "Generate Template CSV Files" %>
<div class="row-fluid">
  <div class="alert alert-info">
    <p>Datasets uploaded must conform to the specifications in the YAML templates.  Use this tool to generate a blank CSV file and review the requirements of the template.</p>
  </div>
  <div class="row-fluid">
    <table class="table table-bordered table-condensed table-striped" summary="Template List">
      <tr class="header">
        <th>Template name</th>
        <th>Info</th>
        <th>Download CSV</th>
      </tr>
      <% @templates.each do |template| %>
        <tr>
          <td><%= template.name %></td>
          <td>
            <div class="btn-group">
            <% @project.trait_groups.each do |trait_group| %>
              <%= link_to(trait_group.name, {:action => :info, :id => template.id, :trait_group_id => trait_group.id }, :class => 'btn btn-small') %>
            <% end %>
            </div>
          </td>
          <td>
            <div class="btn-group">
            <% @project.trait_groups.each do |trait_group| %>
              <%= link_to(raw("<i class='icon-download-alt icon-white'></i>#{trait_group.name}"), {:action => :download, :format => :csv, :id => template.id, :trait_group_id => trait_group.id}, :class => 'btn btn-small btn-primary') %>
            <% end %>
            </div>
          </td>
        </tr>
      <% end %>
    </table>
  </div>
</div>