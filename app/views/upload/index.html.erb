<% @page_title = 'Upload Data' %>
<div class="row-fluid">
  <div class="row-fluid">
    <p class="lead">Upload Data:</p>
  </div>
  <div class="row-fluid">
    <div class="well">
      <%= form_for(:dataset, :url => {:action => 'create'}, :html => { :multipart => 'true', :class =>'form form-horizontal' }) do |f| %>
        <div class="control-group">
          <%= f.label(:csv_file, "Select your CSV file:", :class => 'control-label') %>
          <div class="controls">
            <%= f.file_field(:csv_file) %>
          </div>
        </div>
        <div class="control-group">
          <div class="controls">
              <%= button_tag("Upload", :type => 'submit', :class => 'btn btn-primary') %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
<div id="uploaded-datasets" class="row-fluid">
  <div class="row-fluid">
    <p class="lead">Uploaded Datasets</p>
  </div>
  <div class="row-fluid">
    <table class="table table-bordered table-condensed table-striped" summary="Dataset List">
      <tr class="header">
        <th>Download</th>
        <th>Filename</th>
        <th>Upload Date</th>
        <th>Uploader</th>
        <th>Status</th>
      </tr>
      <% @datasets.each do |dataset| %>
          <tr>
            <td><%= link_to(raw("<i class=\"icon-download-alt\"></i>"),dataset.csv_file.url, :class => 'btn btn-small') %></td>
            <td><%= dataset.csv_file_file_name %></td>
            <td><%= dataset.created_at %></td>
            <td><%= dataset.user.email %></td>
            <td><%= dataset.status %></td>
          </tr>
      <% end %>
    </table>
  </div>
</div>