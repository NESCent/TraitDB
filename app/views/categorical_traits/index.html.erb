<% @page_title = "Categorical Traits" %>
<div class="row-fluid">
  <div class="row"><p class="lead">Categorical Traits</p></div>
  <div class="row">
    <table class="table table-bordered table-condensed table-striped" summary="Categorical Trait List">
    <tr class="header">
      <th>Trait Name</th>
      <th>Source Dataset</th>
      <th>Categories</th>
      <th>OTUs</th>
      <th>Actions</th>
    </tr>
    <% @categorical_traits.each do |trait| %>
    <tr>
      <td><%= trait.name %></td>
      <td><% if trait.csv_dataset %><%= link_to(trait.dataset_name, csv_dataset_path(trait.csv_dataset)) %><% end %></td>
      <td><%= link_to("#{trait.categorical_trait_categories.count}", categorical_trait_categories_path(:categorical_trait => trait.id)) %></td>
      <td><%=  link_to("#{trait.otus.count}", otus_path(:categorical_trait_id => trait.id)) %></td>
      <td>
        <div class="btn-group">
          <%= link_to("Show", categorical_trait_path(trait), :class => 'btn btn-small' ) %>
        </div>
      </td>
    </tr>
    <% end %>
    </table>
	</div>
	<div class="row">
    <div class="pagination">
      <ul>
        <% 
          pages = (@total / @count) + 1
          pages.times.each do |p|
        %>
          <li><%= link_to((p+1).to_s, categorical_traits_path({:start => "#{p * @count}" , :count => @count})) %></li>
        <% end %>
      </ul>
    </div>
	</div>
</div>